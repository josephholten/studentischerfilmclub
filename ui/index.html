<!DOCTYPE html>
<html>
    <head>
        <title>Studentischer Filmclub Heidelberg</title>

        <!--meta name="viewport" content="width=device-width, initial-scale=1.0"-->

        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" 
            href="https://fonts.googleapis.com/css?family=Permanent+Marker|REM" type="text/css">
    </head>

    <body>

        <div class="topbar">
            <a class="topbar-item" href="#events">
                Events
            </a>
            <a class="topbar-item" href="#abstimmungen">
                Abstimmungen
            </a>
        </div>
        <div class="title">
            <image src="assets/title.png" class="title">
            <div class="subtitle-socials">
                <div class="subtitle">
                    <div class="subtitle-text">
                        <div>Magst du Filme? </div>
                        <div>Wir auch!</div>
                    </div>
                </div>
                <div class="socials">
                    <div class="socials-text">
                        melde dich bei
                    </div>
                    <a href="https://facebook.com">
                        <img src="assets/facebook.svg">
                    </a>
                    <a href="https://www.instagram.com/filmclub_heidelberg">
                        <img src="assets/instagram.svg">
                    </a>
                    <a href="https://chat.whatsapp.com/D86oPArrxYC2yHW03AdBDW">
                        <img src="assets/whatsapp.svg">
                    </a>
                </div>
            </div>
        </div>

        <div class="content-block">
            Der Studentische Filmclub Heidelberg ist eine Gruppe Filmbegeisterter.
            Wir sehen und diskutieren Filmkunst.
            Einmal im Monat stellen wir einen selbst ausgew&aumlhlten Film im Karlstorkino vor.
            Wenn du dich f&uumlr Filmkunst interessierst und Ahnung davon hast oder haben m&oumlchtest, 
            komm zu unseren Treffen und Kinovorstellungen.
        </div>

        <div class="content-block events" id="events">
            <div>
                Die n&aumlchsten Events des Studentischen Filmclubs:
            </div>

            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center"></div>
                <table id="events-list">
                    <tr>
                        <th>test</th>
                        <th>test</th>
                    </tr>
                    <tr>
                        <td>bla</td>
                        <td>bla</td>
                    </tr>
                    <tr>
                        <td>bla</td>
                        <td>bla</td>
                    </tr>
                </table>

                <div id="plus" onclick="newEvent()">+</div>

                <div>
                    Komm gerne dazu!
                </div>
            </div>
        </div>

        <script>
            function newEvent(){
                //ask for password etc, gather data
                let fakedata = {"name": "Film", "date": "02.08.2023", "time": "21:00", "place": "?"}
                const options = {
                    method: 'POST',
                    body: JSON.stringify( fakedata )  
                };
                fetch("http:localhost:5000/writeEvent", options)
                getEvents()
            }
            window.onload = async function getEvents(){
                let events;
                let placeLinks = {"Karlstorkino": "https://www.karlstorkino.de/reihe/studentischer-filmclub-heidelberg"}
                const res = await fetch("http://localhost:5000/readEvent");
                events = await res.json()
                console.log(events)
                let x = "<tr>"+
                        "<th>Event</th>"+
                        "<th>Datum</th>"+
                        "<th>Uhrzeit</th>"+
                        "<th>Ort</th>"+
                    "</tr>", i=0;
                while (i < events.length){
                    x = x + 
                    "<tr>"+
                        "<td>" + events[i].name + "</td>"+
                        "<td>" + events[i].date + "</td>"+
                        "<td>" + events[i].time + "</td>"+
                        //if (events[i].place in placeLinks){
                        //    x = x+ "href="+placeLinks[events[i].place]
                        //}
                        "<td>" + events[i].place + "</td>"+
                    "</tr>";
                    i++
                    }
                console.log(x)
                document.getElementById("events-list").innerHTML = x;
            }
    
        </script>

        <div class="content-block" id="abstimmungen">
            Abstimmungen
        </div>
    </body>

    

</html>
